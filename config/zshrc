[ `hostname` = 'vagrant-ubuntu' ] && [[ -f /etc/shrc ]] && . /etc/shrc

# freshshell
source ~/.fresh/build/shell.sh

# antigen
source ~/.antigen/antigen.zsh
antigen use oh-my-zsh
antigen-bundles <<EOBUNDLES
bundler
git
heroku
zsh-users/zsh-syntax-highlighting
EOBUNDLES
antigen-theme robbyrussell
antigen-apply

#history
export SAVEHIST=1000


# dirstack

DIRSTACKFILE="$HOME/.cache/zsh/dirs"
if [[ -f $DIRSTACKFILE ]] && [[ $#dirstack -eq 0 ]]; then
  dirstack=( ${(f)"$(< $DIRSTACKFILE)"} )
  [[ -d $dirstack[1] ]] && cd $dirstack[1]
fi
chpwd() {
    print -l $PWD ${(u)dirstack} >$DIRSTACKFILE
  }
DIRSTACKSIZE=20

setopt autopushd pushdsilent pushdtohome

setopt pushdignoredups
setopt pushdminus

# paths
export PATH=$PATH:/usr/bin/site_perl/
export PATH=$PATH:/usr/bin/vendor_perl/
export PATH=$PATH:~/bin/

# exports
export EDITOR=vim
export PACMAN=pacmatic

export M2_HOME=/opt/maven

# aliases
alias l='ls --almost-all -l --reverse -t'
alias qtip='gradle clean ear'
alias v='vim'
alias h='http --body --follow'
alias hh='http --headers'
alias gff='git pull --ff-only'
alias gp='git pull'

alias doc='docker-compose'

alias pryb="pry -e \"require 'bundler/setup'\""

# PROMPT HACK
export PS1='%{$fg_bold[red]%}★%{$fg_bold[green]%}%p %{$fg[cyan]%}%c %{$fg_bold[blue]%}$(git_prompt_info)%{$fg_bold[blue]%} % %{$reset_color%}'

# fpath
fpath=(~/.zsh/completion $fpath)

# cdpath
[ `hostname` = 'vagrant-ubuntu' ] && export CDPATH=$CDPATH:/git

autoload -U compinit
compinit

# java fonts
# export _JAVA_OPTIONS='-Dawt.useSystemAAFontSettings=gasp' # <- herbstluftwm specific

# nvm
[[ -d ~/.nvm ]] && source ~/.nvm/nvm.sh

# rbenv
[[ -d ~/.rvm ]] && export PATH="$HOME/.rbenv/bin:$PATH" && eval "$(rbenv init -)"

# tmux
export DISABLE_AUTO_TITLE=true

# SIGURD SIN FEIL

letty_debug() {
    if [ -z $1 ]; then
      echo "container id required"
    else
      docker exec -it $(docker ps | grep $1 | awk 'NR==1 {print $1}') bash -c "TERM=xterm less +F /var/log/*/application/debug/debuglog.log"
    fi
  }

letty_tranlog() {
  if [ -z $1 ]; then
    echo "container id required"
  else
    docker exec -it $(docker ps | grep $1 | awk 'NR==1 {print $1}') bash -c "TERM=xterm less +F /var/log/*/application/transaction/si_translog"
  fi
}

